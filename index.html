<!DOCTYPE html>
<html>
  <head>
    <script>
      (var seder=true;
      window.addEventListener('load', (event) => {
        console.log('The page has fully loaded');
      });
    </script>
    <title> üèÜking & queenüëë </title>
    <style>
      body { margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

      #form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }
      #input { border: none; padding: 0 1rem; flex-grow: 1; border-radius: 2rem; margin: 0.25rem; }
      #input:focus { outline: none; }
      #form > button { background: #333; border: none; padding: 0 1rem; margin: 0.25rem; border-radius: 3px; outline: none; color: #fff; }

      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages > li { padding: 0.5rem 1rem; }
      #messages > li:nth-child(odd) { background: #efefef; }
    </style>
    		
        <meta charset="UTF-8">
        <link rel="stylesheet" href="example.css"/>
        <script src="jquery-1.7.min.js"></script>
  </head>
  <!DOCTYPE html>
<html>
	<body>
    <ul id="messages"></ul>
    <form id="form" action="">
      <input id="input" autocomplete="off" /><button>Send</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>

    <script>
      var socket = io();

      var messages = document.getElementById('messages');
      var form = document.getElementById('form');
      var input = document.getElementById('input');

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value) {
          socket.emit('chat message', input.value);
          input.value = '';
        }
      });

      socket.on('chat message', function(msg) {
        var item = document.createElement('li');
        item.textContent = msg;
        messages.appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
      });

      socket.on('send deck', function(msg) {
        client=true;
        deck = JSON.parse(msg);
      });

      //card game
      var globals={};
      var server=false;
      function shuffle(array) {
    let currentIndex = array.length,  randomIndex;

    // While there remain elements to shuffle.
    while (currentIndex != 0) {

      // Pick a remaining element.
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex--;

      // And swap it with the current element.
      [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]];
  }

  return array;
}
function gameinit_server() {
  server=false;
  //window.location.reload(); 
  //Tell the library which element to use for the table
cards.init({table:'#card-table', type:STANDARD});

//Create a new deck of cards
deck = new cards.Deck();
//By default it's in the middle of the container, put it slightly to the side
deck.x -= 50;

//cards.all contains all cards, put them all in the deck
deck.addCards(cards.all);
//No animation here, just get the deck onto the table.
deck.render({immediate:true});

//Now lets create a couple of hands, one face down, one face up.
//upperhandPowerCards = new cards.Hand({faceUp:true, y:60});
//lowerhandPowerCards = new cards.Hand({faceUp:true,  y:340});
//upperhand = new cards.Hand({faceUp:true, y:60});
//lowerhand = new cards.Hand({faceUp:true,  y:340});

if(!server) {
  globals.opponentMagicCards=new cards.Hand({faceUp:true, y:60});
  globals.opponentHandCards=new cards.Hand({faceUp:true, y:60});
  globals.myMagicCards=new cards.Hand({faceUp:true,  y:340});
  globals.myHandCards=new cards.Hand({faceUp:true,  y:340});
} else {
  globals.opponentMagicCards=new cards.Hand({faceUp:true,  y:340});
  globals.opponentHandCards=new cards.Hand({faceUp:true,  y:340});
  globals.myMagicCards=new cards.Hand({faceUp:true, y:60});
  globals.myHandCards=new cards.Hand({faceUp:true, y:60});
}
//Lets add a discard pile
discardPile = new cards.Hand({faceUp:true});
discardPile.x += 150;

globals.opponentMagicCards.x = 160;
globals.myMagicCards.x = 160;
globals.opponentHandCards.x = 420;
globals.myHandCards.x = 420;

//Let's deal when the Deal button is pressed:
$('#deal').click(function() {
  //Deck has a built in method to deal to hands.
  $('#deal').hide();
  for(var x=0;x<3;x++) {//deal 3 kinds of power cards KQJ
    for(var i=0;i<2;i++) {
      deck.deal(1, [globals.opponentMagicCards], 50, function() {
      //This is a callback function, called when the dealing
      //is done.
      });
    }
    for(var i=0;i<2;i++) {
        deck.deal(1, [globals.myMagicCards], 50, function() {
        //This is a callback function, called when the dealing
        //is done.
        });
      }
    }
    for(var x=0;x<8;x++) {//deal 3 kinds of power cards KQJ
      for(var i=0;i<2;i++) {
        deck.deal(1, [globals.opponentHandCards], 50, function() {
        //This is a callback function, called when the dealing
        //is done.
        });
      }
      for(var i=0;i<2;i++) {
          deck.deal(1, [globals.myHandCards], 50, function() {
          //This is a callback function, called when the dealing
          //is done.
          });
        }
    }
    shuffle(globals.myHandCards);
    globals.myHandCards.render();
  });



//When you click on the top card of a deck, a card is added
//to your hand
/*
deck.click(function(card){
  if (card === deck.topCard()) {
	lowerhand.addCard(deck.topCard());
	lowerhand.render();
  }
});

//Finally, when you click a card in your hand, if it's
//the same suit or rank as the top card of the discard pile
//then it's added to it
lowerhand.click(function(card){
  if (card.suit == discardPile.topCard().suit
	|| card.rank == discardPile.topCard().rank) {
	discardPile.addCard(card);
	discardPile.render();
	lowerhand.render();
  }
});
*/

//So, that should give you some idea about how to render a card game.
//Now you just need to write some logic around who can play when etc...
//Good luck :)
}
    </script>
        		<h1> üèÜking & queenüëë </h1>
	
            <img class="preload" src="img/cards.png"/>
        
            <div id="card-table">
              <button onclick="gameinit_server();" id="shuffle">Server</button>
              <button id="deal">DEAL</button>
            </div>
              <!--
            <footer>
             
              cards.js was created by <a href="http://einaregilsson.com">Einar Egilsson</a> and is licensed
              under the MIT license. The card images were created by <a href="http://nicubunu.ro">Nicu Buculei</a> and are
              in the public domain.
            </footer>
            -->

            <!-- load this at the bottom so the #card-table element exists -->
            <script src="deckType.js"></script>
            <script src="cards.js"></script>
            <script src="example.js"></script>
            alesrt("here");
  </body>
</html>
